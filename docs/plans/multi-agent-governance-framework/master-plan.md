# 多智能体治理框架 (Multi-Agent Governance Framework)
## Master Plan - 总体规划

**版本**: 1.0
**日期**: 2026-02-10
**状态**: 规划中

---

## 1. 项目概述

### 1.1 愿景与使命

**愿景**：打造业界领先的开源多智能体协作框架，将人类社会成熟的政治治理理念引入 AI Agent 组织，实现大规模智能体的高效协作与自我治理。

**使命**：通过三权分立、权力制衡、问责机制等政治智慧，解决多智能体系统中的协调难题、单点故障和权力滥用问题，让 AI 团队像人类组织一样具备自我纠错和持续优化能力。

### 1.2 核心理念

本框架的设计哲学源于以下三个核心理念：

1. **权力制衡 (Checks and Balances)**
   - 顶层三权分立，防止单一 Agent 的决策失误
   - 签字与否决机制，确保重大决策经过多方审核
   - 申诉与问责流程，形成完整的责任闭环

2. **动态适应 (Dynamic Adaptation)**
   - 角色与团队根据任务动态生成，而非静态预设
   - 通过选举与竞选机制淘汰低效 Agent，激励高效协作
   - 升职、降级、撤职机制保持团队活力

3. **透明协作 (Transparent Collaboration)**
   - 基于白板的共享知识空间，所有决策可追溯
   - 心跳消息总线确保信息同步与状态可见
   - 分层日志系统记录完整的执行轨迹

### 1.3 目标用户

- **AI 研究者**：研究多智能体协作、群体智能、自组织系统
- **软件开发团队**：需要 AI Agent 辅助完成复杂开发任务
- **企业用户**：构建智能化的业务流程自动化系统
- **开源贡献者**：参与和扩展顶级 AI 基础设施项目

---

## 2. 核心目标

1. **实现三层治理架构**
   构建顶层（三权分立）、中层（领域领导）、底层（执行单元）的清晰层级结构

2. **提供完整的 SDK 与 TUI**
   - SDK：供开发者编程式集成多智能体团队
   - TUI：类似 Claude Code 的交互式界面，实时监控任务执行

3. **集成 pi-mono 生态**
   基于 `@mariozechner/pi-agent-core`、`pi-ai`、`pi-coding-agent`，复用成熟的 Agent 能力

4. **支持全自动与半自动模式**
   - 全自动：团队自主决策，无需人工干预
   - 半自动：关键节点等待用户确认

5. **实现完整的权力制衡机制**
   签字、否决、申诉、问责、选举、轮岗等制度化流程

6. **提供高质量的测试与文档**
   单元测试、集成测试、示例任务、API 文档、架构文档齐全

---

## 3. 范围定义

### 3.1 V1.0 包含的功能

#### 核心功能
- ✅ 三层治理架构（动态角色生成）
- ✅ 心跳消息总线（4 秒周期）
- ✅ 多层白板系统（Markdown 文件）
- ✅ 签字与否决机制
- ✅ 申诉与问责流程
- ✅ 选举与竞选机制（每 50 心跳周期）
- ✅ 错误恢复策略（重试 + 逐层上报）

#### 用户界面
- ✅ TUI 交互式界面
  - 左侧：任务输入与执行视图
  - 右侧：Agent 状态面板 + 滚动日志流
- ✅ 任务生命周期管理（暂停/恢复/取消）
- ✅ 全自动/半自动模式选择

#### 持久化与日志
- ✅ SQLite 数据库（任务状态、Agent 历史、审计记录）
- ✅ 分类日志系统（消息总线日志、审计日志、性能日志）
- ✅ 白板文件系统（分层白板 + 全局白板）

#### 开发者工具
- ✅ SDK API（配置、启动、监控、控制）
- ✅ 单元测试与集成测试
- ✅ 示例任务与文档

### 3.2 V1.0 不包含的功能

- ❌ **远程协作**：多机部署、分布式 Agent 团队（未来版本）
- ❌ **安全与权限管理**：用户认证、沙箱隔离（本地运行暂不需要）
- ❌ **插件系统**：第三方扩展、自定义 Agent 类型（V2.0 考虑）
- ❌ **图形化界面**：Web UI、桌面应用（V1.0 专注于 TUI）
- ❌ **高级调度算法**：负载均衡、优先级队列（当前采用简单策略）

---

## 4. 高层架构

### 4.1 三层治理结构

```
┌─────────────────────────────────────────────────────────────┐
│                      顶层：三权分立                          │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │  权力 A     │  │  权力 B     │  │  权力 C     │         │
│  │ (动态角色)  │  │ (动态角色)  │  │ (动态角色)  │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
│         ↓                ↓                ↓                  │
└─────────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────┐
│                    中层：领域领导层                          │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │  领导 1     │  │  领导 2     │  │  领导 3     │  ...    │
│  │ (技术架构师)│  │ (项目经理)  │  │ (质量保证)  │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
│         ↓                ↓                ↓                  │
└─────────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────────┐
│                    底层：执行 Agent 层                       │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │  Agent 1    │  │  Agent 2    │  │  Agent 3    │  ...    │
│  │ (编码)      │  │ (测试)      │  │ (文档)      │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
└─────────────────────────────────────────────────────────────┘
```

**层级职责**：
- **顶层**：战略决策、任务分解、中层任命、冲突仲裁、质量把关
- **中层**：领域规划、资源调度、进度监控、上下沟通、团队管理
- **底层**：具体执行、工具调用、结果上报、同级协作

### 4.2 核心组件

```mermaid
graph TB
    subgraph 用户层
        CLI[TUI 命令行界面]
        SDK[SDK API]
    end

    subgraph 编排层
        RM[需求管理器<br/>多轮问答+任务解析]
        TM[团队管理器<br/>动态角色生成]
        LM[生命周期管理器<br/>暂停/恢复/取消]
    end

    subgraph 治理层
        GOV[治理引擎]
        SIGN[签字与否决模块]
        APPEAL[申诉与问责模块]
        ELECT[选举与竞选模块]
    end

    subgraph 通信层
        BUS[心跳消息总线<br/>4秒周期]
        WB[白板系统<br/>分层Markdown]
    end

    subgraph Agent层
        TOP[顶层三权Agent]
        MID[中层领导Agent]
        BOT[底层执行Agent]
    end

    subgraph 持久化层
        DB[(SQLite数据库)]
        LOG[日志系统<br/>多类型分离]
    end

    subgraph 底层能力
        PICORE[@mariozechner/pi-agent-core]
        PIAI[@mariozechner/pi-ai]
        PICODING[@mariozechner/pi-coding-agent]
    end

    CLI --> RM
    SDK --> TM
    RM --> TM
    TM --> GOV
    GOV --> SIGN
    GOV --> APPEAL
    GOV --> ELECT
    GOV --> BUS
    BUS --> TOP
    BUS --> MID
    BUS --> BOT
    TOP --> WB
    MID --> WB
    BOT --> WB
    LM --> TM
    BUS --> DB
    WB --> DB
    GOV --> LOG
    BOT --> PICORE
    BOT --> PIAI
    BOT --> PICODING
```

### 4.3 关键数据流

**任务执行流程**：
1. 用户通过 TUI 提交任务描述
2. 需求管理器进行多轮问答（每轮 10 问题），澄清需求
3. 团队管理器根据需求动态生成：
   - 顶层三权角色（AI 决定具体名称和职责）
   - 中层领导角色（顶层三权协商拉起）
   - 底层执行 Agent（中层分配）
4. 治理引擎启动心跳总线，所有 Agent 开始协作
5. Agent 通过白板共享信息，通过消息总线通信
6. 关键决策需要签字，冲突通过申诉解决
7. 每 50 个心跳周期触发一次选举，淘汰低效 Agent
8. 任务完成或用户取消后，生成完整的审计报告

---

## 5. 关键设计决策

### 5.1 动态角色分配（而非静态预设）

**决策**：所有角色（顶层三权、中层领导、底层执行）的具体名称和职责由 AI 根据任务动态决定。

**理由**：
- 不同类型的任务需要不同的治理结构（开发任务 vs 研究任务）
- 静态角色无法适应复杂多变的真实场景
- AI 可以根据需求上下文做出最优的角色设计

**实现**：
- 需求管理器在多轮问答后，将任务特征传递给团队管理器
- 团队管理器调用 LLM 生成角色方案（包括角色名、职责、权限）
- 生成的角色方案在全自动模式下直接执行，半自动模式下等待用户确认

### 5.2 心跳消息总线（冯诺伊曼风格）

**决策**：采用固定周期（4 秒）的心跳机制，所有 Agent 在心跳时刻同步处理消息。

**理由**：
- 简化并发模型，避免复杂的异步消息处理
- 类似冯诺伊曼架构的统一总线，易于理解和调试
- 固定周期确保系统行为可预测

**实现**：
- 消息总线维护一个全局时钟，每 4 秒触发一次心跳
- 所有 Agent 在心跳触发时：
  1. 从总线读取消息
  2. 执行本地计算（规划/执行/反思）
  3. 将输出消息写入总线
- 超时未响应的 Agent 标记为异常状态

### 5.3 白板系统（分层 Markdown）

**决策**：使用 Markdown 文件作为白板介质，每层有独立白板，全局有共享白板。

**理由**：
- Markdown 可读性强，便于人工审查和调试
- 文件系统天然支持版本控制（Git 集成）
- 结构化文本易于 LLM 理解和生成

**实现**：
```
.agent-workspace/
├── whiteboards/
│   ├── top-layer.md              # 顶层白板（战略规划、重大决策）
│   ├── mid-layer-architect.md    # 中层白板示例
│   ├── mid-layer-pm.md
│   ├── bottom-layer-agent-1.md   # 底层白板示例
│   └── ...
├── global-whiteboard.md          # 全局白板（任务目标、里程碑、共识）
└── ...
```

**权限规则**：
- 每个 Agent 可以自由读取任何层级的白板
- 只能写入自己所在层级的白板和全局白板
- 跨层写入需要通过消息总线请求，经上级批准

### 5.4 权力制衡机制

**决策**：实现签字、否决、申诉、问责、选举五大制衡机制。

**理由**：
- 防止单一 Agent 的错误决策导致任务失败
- 激励 Agent 提升表现，淘汰低效成员
- 形成完整的责任闭环，可追溯所有决策

**具体机制**：

| 机制 | 触发场景 | 参与方 | 结果 |
|------|---------|--------|------|
| **签字** | 重大决策（技术方案、任务分配、资源调度） | 需要 2-3 方签字（根据决策级别） | 签字后决策生效，签字方承担责任 |
| **否决** | 对签字决策有异议 | 任何有权签字的一方 | 决策阻塞，进入申诉流程 |
| **申诉** | 被否决的决策需要推进 | 原提议方 + 中立仲裁方（上级或同级） | 申诉成功：决策生效；失败：修改方案 |
| **问责** | 任务失败、质量问题、资源浪费 | 上级对下级，或同级举报 | 警告 → 降级 → 撤职（累计 3 次警告） |
| **选举** | 每 50 个心跳周期（约 3.3 分钟） | 同层 Agent 互评 + 上级评估 | 低绩效者降级，高绩效者晋升或奖励 |

**示例场景**：
```
1. 中层架构师提出技术方案
2. 需要顶层"规划权"和"执行权"双方签字
3. "审查权"认为方案有风险，行使否决权
4. 架构师发起申诉，提供补充论证
5. 顶层三权投票（2:1），申诉通过，方案执行
6. 如果方案最终失败，架构师被问责，记录 1 次警告
```

### 5.5 持久化策略（SQLite）

**决策**：使用 SQLite 作为唯一数据库，存储任务状态、Agent 历史、审计记录。

**理由**：
- 轻量级，无需额外服务，适合本地运行
- 支持 SQL 查询，便于数据分析和审计
- 单文件数据库，易于备份和迁移

**数据库结构**（简化版）：
```sql
-- 任务表
CREATE TABLE tasks (
  id TEXT PRIMARY KEY,
  description TEXT,
  status TEXT, -- pending/running/paused/completed/cancelled
  mode TEXT, -- auto/semi-auto
  created_at INTEGER,
  updated_at INTEGER
);

-- Agent 表
CREATE TABLE agents (
  id TEXT PRIMARY KEY,
  task_id TEXT,
  layer TEXT, -- top/mid/bottom
  role TEXT, -- 动态角色名
  status TEXT, -- idle/working/blocked/failed
  created_at INTEGER,
  FOREIGN KEY (task_id) REFERENCES tasks(id)
);

-- 消息表（消息总线历史）
CREATE TABLE messages (
  id TEXT PRIMARY KEY,
  task_id TEXT,
  from_agent_id TEXT,
  to_agent_id TEXT, -- NULL 表示广播
  type TEXT, -- task_assign/progress_report/sign/veto/appeal/heartbeat
  content TEXT,
  timestamp INTEGER,
  FOREIGN KEY (task_id) REFERENCES tasks(id)
);

-- 决策表（签字与否决记录）
CREATE TABLE decisions (
  id TEXT PRIMARY KEY,
  task_id TEXT,
  decision_type TEXT, -- sign/veto/appeal
  proposer_id TEXT,
  target_content TEXT,
  signers TEXT, -- JSON array of agent IDs
  status TEXT, -- pending/approved/rejected
  created_at INTEGER,
  FOREIGN KEY (task_id) REFERENCES tasks(id)
);

-- 审计表（问责记录）
CREATE TABLE audits (
  id TEXT PRIMARY KEY,
  task_id TEXT,
  agent_id TEXT,
  event_type TEXT, -- warning/demotion/dismissal/promotion
  reason TEXT,
  created_at INTEGER,
  FOREIGN KEY (task_id) REFERENCES tasks(id)
);

-- 选举表
CREATE TABLE elections (
  id TEXT PRIMARY KEY,
  task_id TEXT,
  round INTEGER, -- 第几轮选举（heartbeat_count / 50）
  layer TEXT,
  results TEXT, -- JSON: {agent_id: score}
  actions TEXT, -- JSON: [{agent_id, action: promote/demote/dismiss}]
  created_at INTEGER,
  FOREIGN KEY (task_id) REFERENCES tasks(id)
);
```

---

## 6. 技术栈

### 6.1 核心技术

| 类别 | 技术选型 | 版本要求 | 说明 |
|------|---------|---------|------|
| **编程语言** | TypeScript | >= 5.0 | 类型安全，成熟生态 |
| **运行时** | Node.js | >= 20.0 | LTS 版本 |
| **数据库** | SQLite | >= 3.40 | 轻量级本地存储 |
| **TUI 框架** | ink (React for CLI) | >= 4.0 | 组件化 TUI 开发 |
| **测试框架** | Vitest | >= 1.0 | 快速、现代化 |
| **构建工具** | tsup | >= 8.0 | 零配置 TS 打包 |
| **日志库** | pino | >= 8.0 | 高性能结构化日志 |

### 6.2 核心依赖

```json
{
  "dependencies": {
    "@mariozechner/pi-agent-core": "^1.0.0",
    "@mariozechner/pi-ai": "^1.0.0",
    "@mariozechner/pi-coding-agent": "^1.0.0",
    "better-sqlite3": "^9.0.0",
    "ink": "^4.4.0",
    "react": "^18.2.0",
    "zod": "^3.22.0",
    "pino": "^8.16.0",
    "commander": "^11.1.0"
  },
  "devDependencies": {
    "typescript": "^5.3.0",
    "vitest": "^1.0.0",
    "tsup": "^8.0.0",
    "@types/node": "^20.10.0",
    "@types/react": "^18.2.0"
  }
}
```

### 6.3 项目结构

```
multi-agent-governance-framework/
├── packages/
│   ├── core/                    # 核心框架（SDK）
│   │   ├── src/
│   │   │   ├── agents/          # Agent 基类与管理
│   │   │   ├── governance/      # 治理引擎
│   │   │   ├── communication/   # 消息总线
│   │   │   ├── whiteboard/      # 白板系统
│   │   │   ├── persistence/     # 数据库层
│   │   │   ├── lifecycle/       # 生命周期管理
│   │   │   └── index.ts
│   │   ├── tests/
│   │   └── package.json
│   ├── cli/                     # TUI 命令行工具
│   │   ├── src/
│   │   │   ├── components/      # TUI 组件
│   │   │   ├── commands/        # CLI 命令
│   │   │   └── index.tsx
│   │   └── package.json
│   └── examples/                # 示例任务
│       ├── todo-app/
│       ├── api-server/
│       └── data-pipeline/
├── docs/
│   ├── api/                     # API 文档
│   ├── architecture/            # 架构文档
│   ├── guides/                  # 使用指南
│   └── plans/                   # 本规划文档所在目录
├── .agent-workspace/            # 运行时工作区（.gitignore）
│   ├── whiteboards/
│   ├── global-whiteboard.md
│   ├── task.db                  # SQLite 数据库
│   └── logs/
├── package.json                 # Monorepo 根配置
├── tsconfig.json
└── README.md
```

---

## 7. 依赖与假设

### 7.1 外部依赖

1. **pi-mono 生态**
   - 假设 `@mariozechner/pi-agent-core` 等包的 API 稳定可用
   - 需要研读其源码和文档，确保正确集成
   - 如果 API 不兼容，需要包装层适配

2. **LLM 能力**
   - 假设 pi-ai 能够调用足够智能的 LLM（如 Claude 3.5+、GPT-4+）
   - 动态角色生成、任务规划依赖 LLM 的推理能力
   - 需要配置 API Key（通过环境变量或配置文件）

3. **Node.js 环境**
   - 用户本地已安装 Node.js 20+
   - 支持 ES Module

### 7.2 设计假设

1. **本地单机运行**
   - V1.0 不考虑分布式部署
   - 所有 Agent 运行在同一进程或子进程中
   - 不需要网络通信、负载均衡

2. **用户信任环境**
   - 不考虑恶意 Agent 或沙箱隔离
   - Agent 可以执行任意代码（基于 pi-coding-agent）
   - 安全性在未来版本中增强

3. **任务粒度**
   - 单个任务的执行时长预期为 **10 分钟到 2 小时**
   - 超长任务（数天）可能需要手动拆分
   - 超短任务（数秒）不适合多智能体协作

4. **Agent 数量**
   - 默认配置：顶层 3 个 + 中层 2-5 个 + 底层 4-5 个
   - 最大支持 **50 个 Agent** 同时运行（性能考虑）
   - 超过限制时自动拒绝或排队

---

## 8. 风险评估

### 8.1 技术风险

| 风险 | 可能性 | 影响 | 缓解措施 |
|------|-------|------|---------|
| **pi-mono 集成困难** | 中 | 高 | 提前调研 API，准备备用方案（自研基础 Agent） |
| **心跳机制性能瓶颈** | 低 | 中 | 限制 Agent 数量，优化消息序列化 |
| **SQLite 并发问题** | 中 | 中 | 使用 WAL 模式，避免频繁写入 |
| **TUI 渲染卡顿** | 中 | 低 | 限制日志流刷新频率，按需加载历史数据 |
| **LLM 调用失败** | 高 | 高 | 实现重试机制、降级策略（使用本地模型） |

### 8.2 设计风险

| 风险 | 可能性 | 影响 | 缓解措施 |
|------|-------|------|---------|
| **动态角色生成质量差** | 中 | 高 | 提供高质量提示词模板，支持用户修正 |
| **权力制衡机制过度复杂** | 高 | 中 | V1.0 简化流程，仅实现核心签字与选举 |
| **白板冲突与不一致** | 中 | 中 | 使用文件锁，实现乐观锁机制 |
| **选举导致团队不稳定** | 低 | 中 | 设置缓冲期，避免频繁撤职 |

### 8.3 项目风险

| 风险 | 可能性 | 影响 | 缓解措施 |
|------|-------|------|---------|
| **功能范围过大** | 高 | 高 | 严格按照本规划执行，推迟非核心功能 |
| **测试覆盖不足** | 中 | 中 | 设定最低覆盖率目标（70%），集成 CI/CD |
| **文档滞后** | 中 | 中 | 文档与代码同步开发，每个模块完成后立即编写文档 |
| **社区推广不足** | 高 | 低 | 准备演示视频、博客文章、示例项目 |

---

## 9. 开发路线图

### Phase 1: 基础设施（2 周）
- [ ] 项目初始化（Monorepo、TypeScript、构建配置）
- [ ] SQLite 数据库层（Schema、ORM 封装）
- [ ] 日志系统（分类日志、文件轮转）
- [ ] 基础测试框架

### Phase 2: 通信与白板（2 周）
- [ ] 心跳消息总线（定时器、消息队列、路由）
- [ ] 白板系统（文件操作、权限控制、Markdown 解析）
- [ ] Agent 基类（状态机、生命周期钩子）

### Phase 3: 治理引擎（3 周）
- [ ] 签字与否决模块
- [ ] 申诉与问责模块
- [ ] 选举与竞选模块
- [ ] 治理规则配置系统

### Phase 4: 团队管理（2 周）
- [ ] 需求管理器（多轮问答、任务解析）
- [ ] 团队管理器（动态角色生成、Agent 生命周期）
- [ ] 任务生命周期管理（暂停/恢复/取消）

### Phase 5: pi-mono 集成（2 周）
- [ ] 集成 pi-agent-core（规划、执行、反思）
- [ ] 集成 pi-ai（LLM 调用）
- [ ] 集成 pi-coding-agent（代码生成、执行）
- [ ] 错误恢复与重试机制

### Phase 6: TUI 界面（2 周）
- [ ] 主界面布局（左右分屏）
- [ ] 任务输入与执行视图
- [ ] Agent 状态面板
- [ ] 实时日志流
- [ ] 快捷键与交互命令

### Phase 7: SDK 与 CLI（1 周）
- [ ] SDK API 设计与实现
- [ ] CLI 命令（start、status、pause、resume、cancel）
- [ ] 配置文件支持

### Phase 8: 测试与文档（2 周）
- [ ] 单元测试（目标覆盖率 70%）
- [ ] 集成测试（端到端场景）
- [ ] 示例任务（TODO 应用、API 服务器）
- [ ] API 文档、架构文档、使用指南

### Phase 9: 优化与发布（1 周）
- [ ] 性能优化（内存、CPU 占用）
- [ ] 错误处理与边界情况
- [ ] 发布准备（README、LICENSE、CHANGELOG）
- [ ] npm 发布

**总预期时间：17 周（约 4 个月）**

---

## 10. 详细规划文档目录

本 Master Plan 是总体规划的纲领性文档。详细的设计规范将在以下 Spec 文档中展开：

### 核心架构 Spec
1. **[01-架构设计.md](specs/01-架构设计.md)**
   三层治理结构、核心组件关系、数据流设计

2. **[02-Agent模型.md](specs/02-Agent模型.md)**
   Agent 基类设计、状态机、生命周期、能力接口

3. **[03-通信机制.md](specs/03-通信机制.md)**
   心跳消息总线、消息类型、路由规则、序列化

4. **[04-白板系统.md](specs/04-白板系统.md)**
   白板文件结构、权限模型、并发控制、Markdown 规范

### 治理机制 Spec
5. **[05-权力制衡.md](specs/05-权力制衡.md)**
   签字、否决、申诉、问责、选举五大机制的详细规则

6. **[06-动态角色生成.md](specs/06-动态角色生成.md)**
   需求分析、角色生成算法、提示词模板、用户确认流程

7. **[07-错误恢复.md](specs/07-错误恢复.md)**
   重试策略、逐层上报、协商决策、状态回滚

### 持久化与接口 Spec
8. **[08-数据库设计.md](specs/08-数据库设计.md)**
   完整的 Schema、索引、查询优化、迁移策略

9. **[09-日志系统.md](specs/09-日志系统.md)**
   日志分类、格式规范、存储策略、查询接口

10. **[10-SDK-API设计.md](specs/10-SDK-API设计.md)**
    核心 API、配置选项、事件监听、示例代码

### 用户界面 Spec
11. **[11-TUI界面设计.md](specs/11-TUI界面设计.md)**
    布局方案、组件设计、交互流程、快捷键

12. **[12-CLI命令设计.md](specs/12-CLI命令设计.md)**
    命令列表、参数规范、输出格式、配置文件

### 集成与测试 Spec
13. **[13-pi-mono集成.md](specs/13-pi-mono集成.md)**
    API 调研、集成方案、适配层设计、测试策略

14. **[14-测试策略.md](specs/14-测试策略.md)**
    单元测试、集成测试、E2E 测试、覆盖率目标

---

## 11. 成功标准

V1.0 版本达到以下标准即可发布：

### 功能完整性
- ✅ 用户可通过 TUI 提交任务，系统自动拉起多智能体团队
- ✅ 团队能自主完成中等复杂度的开发任务（如 CRUD 应用）
- ✅ 所有核心治理机制（签字、否决、申诉、选举）可演示
- ✅ 支持全自动与半自动模式
- ✅ 支持任务暂停、恢复、取消

### 质量标准
- ✅ 单元测试覆盖率 ≥ 70%
- ✅ 至少 3 个完整的示例任务
- ✅ 核心 API 有完整文档和示例代码
- ✅ 架构文档清晰，可供外部开发者理解

### 性能标准
- ✅ 支持 50 个 Agent 同时运行，内存占用 < 2GB
- ✅ TUI 界面流畅，日志延迟 < 1 秒
- ✅ 单次心跳处理时间 < 500ms

### 可用性标准
- ✅ 提供 npm 包，可通过 `npx` 快速启动
- ✅ README 包含快速开始指南，5 分钟内可运行示例
- ✅ 错误信息清晰，常见问题有解决方案

---

## 12. 下一步行动

1. **审阅本 Master Plan**
   请确认整体架构、技术选型、开发路线是否符合预期

2. **编写详细 Spec 文档**
   按照上述目录，逐个编写 14 份详细设计文档

3. **生成 TODO 清单**
   将每份 Spec 转化为可执行的开发任务

4. **启动 Phase 1 开发**
   完成基础设施搭建，为后续开发奠定基础

---

**本文档是整个项目的核心指南，所有后续决策和开发工作均应以此为基准。**
